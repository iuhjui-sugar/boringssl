{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6e54295b_d1bbe33c",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-05-31T20:59:27Z",
      "side": 1,
      "message": "Normally we do the `sizeof` thing so that we don\u0027t have to duplicate the length, but we\u0027re not actually getting that here.\n```suggestion\n  CONSTTIME_SECRET(out_shared_key, 32);\n```\n\n(Though I dunno if we get anything out of marking `out_shared_key`. It\u0027s already uninitialized by being the output variable since it\u0027s not an input.)",
      "range": {
        "startLine": 47,
        "startChar": 35,
        "endLine": 47,
        "endChar": 60
      },
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d89d60a0_223a0779",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 8749
      },
      "writtenOn": "2023-05-31T21:02:54Z",
      "side": 1,
      "message": "Done. I think it\u0027s only uninitialized on the first one of the two calls.",
      "parentUuid": "6e54295b_d1bbe33c",
      "range": {
        "startLine": 47,
        "startChar": 35,
        "endLine": 47,
        "endChar": 60
      },
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b32e9c2_f37015cd",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-05-31T21:24:02Z",
      "side": 1,
      "message": "True, but even one run with it already uninitialized should do the trick. :-) I guess what I\u0027m saying is that if `X25519` branches on (or uses at all) the value of `out_shared_key` on input, we already have a functional bug anyway, much less a side channel bug, which is caught by other tools anyway (e.g. MSan). It\u0027s a nitpick, but I think it\u0027s better to just leave it unmarked and defer that one to those tools.\n\n(Otherwise, reading the code is a bit confusing since it reads like `out_shared_key` is an input, but it\u0027s not.)",
      "parentUuid": "d89d60a0_223a0779",
      "range": {
        "startLine": 47,
        "startChar": 35,
        "endLine": 47,
        "endChar": 60
      },
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c49b7c2_585d205b",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 8749
      },
      "writtenOn": "2023-05-31T21:31:38Z",
      "side": 1,
      "message": "Could we resolve that readability concern by creating an alias for CONSTTIME_SECRET, like CONSTTIME_DONTUSE or CONSTTIME_WRITEONLY? I think it\u0027s good to have the constant-time verification to be vaguely self-contained -- if valgrind passes, there\u0027s a single path that doesn\u0027t address or branch with secrets.",
      "parentUuid": "1b32e9c2_f37015cd",
      "range": {
        "startLine": 47,
        "startChar": 35,
        "endLine": 47,
        "endChar": 60
      },
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0870eecd_62f19d26",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-06-01T19:27:28Z",
      "side": 1,
      "message": "Eh, probably too much fuss. I don\u0027t feel super strongly, and it sounds like you prefer having this marked. *shrug* Happy to leave this as-is if you prefer. Would rather we not get in the habit of having to mark every output buffer constantly since it\u0027d be tedious, but we can figure that out as we add more of these annotations.",
      "parentUuid": "5c49b7c2_585d205b",
      "range": {
        "startLine": 47,
        "startChar": 35,
        "endLine": 47,
        "endChar": 60
      },
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b40189c_c93d8139",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-05-31T20:59:27Z",
      "side": 1,
      "message": "```suggestion\n  CONSTTIME_DECLASSIFY(out_shared_key, 32);\n```",
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d642424_05a3b868",
        "filename": "crypto/curve25519/x25519_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 8749
      },
      "writtenOn": "2023-05-31T21:02:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b40189c_c93d8139",
      "revId": "66654b21bdd1848fc488727034da375764ea32d9",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    }
  ]
}